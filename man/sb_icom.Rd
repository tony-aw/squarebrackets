% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generic_icom.R
\name{ii_icom}
\alias{ii_icom}
\alias{ss_icom}
\alias{sbt_icom}
\alias{ii_icom.default}
\alias{ss_icom.default}
\alias{sbt_icom.default}
\title{Compute Indices for Copy-On-Modify Substitution}
\usage{
ii_icom(x, i = NULL, use = 1, ...)

ss_icom(x, s = NULL, use = 1:ndim(x), ...)

sbt_icom(x, slice, use, ...)

\method{ii_icom}{default}(
  x,
  i = NULL,
  use = 1,
  ...,
  chkdup = getOption("squarebrackets.chkdup", FALSE)
)

\method{ss_icom}{default}(
  x,
  s = NULL,
  use = 1:ndim(x),
  ...,
  chkdup = getOption("squarebrackets.chkdup", FALSE)
)

\method{sbt_icom}{default}(
  x,
  slice = NULL,
  use = NULL,
  ...,
  chkdup = getOption("squarebrackets.chkdup", FALSE)
)
}
\arguments{
\item{x}{vector, matrix, array, or data.frame; both atomic and recursive objects are supported.}

\item{i, s, slice, use}{See \link{squarebrackets_indx_args}. \cr
Duplicates are not allowed.}

\item{...}{see \link{squarebrackets_method_dispatch}.}

\item{chkdup}{see \link{squarebrackets_options}. \cr
\ifelse{html}{\figure{for_performance-set_to_FALSE-red.svg}{options: alt='[for performance: set to FALSE]'}}{\link[=squarebrackets_help]{for performance: set to FALSE}} \cr}
}
\value{
A strictly positive numeric vector of indices. \cr \cr
}
\description{
The \verb{_icom()} methods compute indices for copy-on-modify substitution.

\if{html}{\out{<div class="sourceCode r">}}\preformatted{x <- array(...)
my_ss2ii <- ss_icom(x, s, use)
x[my_ss2ii] <- value

y <- data.frame(...)
rows <- sbt_icom(y, 1:10, 1, inv = TRUE)
cols <- sbt_icom(y, c("a", "b"), 2)
y[rows, cols] <- value
}\if{html}{\out{</div>}}

thus allowing the user to benefit from the convenient index translations from 'squarebrackets',
whilst still using R's default copy-on-modification semantics
(instead of the semantics provided by 'squarebrackets'). \cr
\cr \cr
}
\examples{

# atomic ====

x <- 1:10
x[ii_icom(x, \(x)x>5)] <- -5
print(x)

x <- array(1:27, dim = c(3,3,3))
x[ss_icom(x, n(1:2, 1:2), c(1,3))] <- -10
print(x)


################################################################################


# recursive ====

x <- as.list(1:10)
x[ii_icom(x, \(x)x>5)] <- -5
print(x)

x <- array(as.list(1:27), dim = c(3,3,3))
x[ss_icom(x, n(1:2, 1:2), c(1,3))] <- -10
print(x)


x <- data.frame(
  a = sample(c(TRUE, FALSE, NA), 10, TRUE),
  b = 1:10,
  c = rnorm(10),
  d = letters[1:10],
  e = factor(letters[11:20])
)
rows <- sbt_icom(x, 1:5, -1)
cols <- sbt_icom(x, c("b", "a"), 2)
x[rows, cols] <- NA
print(x)

}
