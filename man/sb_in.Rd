% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generic_ins.R
\name{sb_before}
\alias{sb_before}
\alias{sb_after}
\alias{sb_before.default}
\alias{sb_after.default}
\alias{sb_before.array}
\alias{sb_after.array}
\alias{sb_before.factor}
\alias{sb_after.factor}
\alias{sb2_before}
\alias{sb2_after}
\alias{sb2_before.default}
\alias{sb2_after.default}
\alias{sb2_before.array}
\alias{sb2_after.array}
\alias{sb2_before.data.frame}
\alias{sb2_after.data.frame}
\title{Methods to Insert New Values Before or After an Index Along a Dimension}
\usage{
sb_before(x, ...)

sb_after(x, ...)

\method{sb_before}{default}(x, new, pos = 1, .attr = NULL, ...)

\method{sb_after}{default}(x, new, pos = length(x), .attr = NULL, ...)

\method{sb_before}{array}(x, new, margin, pos = 1, .attr = NULL, ...)

\method{sb_after}{array}(x, new, margin, pos = dim(x)[margin], .attr = NULL, ...)

\method{sb_before}{factor}(x, new, pos = 1, .attr = NULL, ...)

\method{sb_after}{factor}(x, new, pos = length(x), .attr = NULL, ...)

sb2_before(x, ...)

sb2_after(x, ...)

\method{sb2_before}{default}(x, new, pos = 1, .attr = NULL, ...)

\method{sb2_after}{default}(x, new, pos = length(x), .attr = NULL, ...)

\method{sb2_before}{array}(x, new, margin, pos = 1, .attr = NULL, ...)

\method{sb2_after}{array}(x, new, margin, pos = dim(x)[margin], .attr = NULL, ...)

\method{sb2_before}{data.frame}(x, new, margin, pos = 1, .attr = NULL, ...)

\method{sb2_after}{data.frame}(x, new, margin, pos = collapse::fdim(x)[margin], .attr = NULL, ...)
}
\arguments{
\item{x}{see \link{squarebrackets_immutable_classes} and \link{squarebrackets_mutable_classes}.}

\item{...}{further arguments passed to or from other methods.}

\item{new}{the new value(s). The type of object depends on \code{x}:
\itemize{
\item For atomic objects, \code{new} can be any atomic object.
However, if one wished the added values in \code{new} to be named,
ensure \code{new} is the same type of object as \code{x}.
For example: use matrix with column names for \code{new} when appending/inserting columns to matrix \code{x}.
\item For factors, \code{new} must be a factor.
\item For lists, \code{new} must be a (possible named) list.
\item For data.frame-like objects, \code{new} must be a data.frame.
}}

\item{pos}{a strictly positive single integer scalar (so no duplicates),
giving the position along the dimension (specified in \code{margin}),
before or after which the new values are added.}

\item{.attr}{a list,
giving additional potentially missing attributes to be added to the returned object. \cr
By default, concatenation strips attributes,
since the attributes of \code{x} and \code{new} may not be equal or even compatible. \cr
In the \code{attr} argument, the attributes of the merged object can be specified. \cr
Only attributes that are actually missing AFTER insertion will be added,
thus preventing overwriting existing attributes like names. \cr
One may, for example, specify \code{.attr = sb_a(x)} or \code{.attr = sb_a(new)}. \cr
If \code{NULL} (the default), no attributes will be added post-insert. \cr
If speed is important, \code{NULL} is the best option (but then attributes won't be preserved). \cr}

\item{margin}{a single scalar, giving the dimension along which to add new values.}
}
\value{
Returns a copy of the appended object.
}
\description{
The \code{sb_before()}/\code{sb2_before()} method
inserts new values before some position along a dimension. \cr
The \code{sb_after()}/\code{sb2_after()} method
inserts new values after some position along a dimension. \cr
\cr
Use \code{sb_before(x, ...)}/\code{sb_after(x, ...)}
if \code{x} is a non-recursive object (i.e. atomic or factor). \cr
Use \code{sb2_before(x, ...)}/\code{sb2_after(x, ...)}
if \code{x} is a recursive object (i.e. list or data.frame-like). \cr
\cr
\code{sb2_before.array()} and \code{sb2_after.array()}
use an altered version of \code{abind::}\link[abind]{abind}
(see references below)
to work on recursive arrays
(i.e. dimensional lists). \cr
It is partially written in
'C++' (via 'Rcpp') and 'C' (via 'collapse'),
for better performance.
\cr \cr
}
\examples{

# atomic objects ====

x <- matrix(1:20 , ncol = 4)
print(x)
new <- -1 * x
sb_before(x, new, 1)
sb_after(x, new, 1)
sb_before(x, new, 2)
sb_after(x, new, 2)


#############################################################################


# factors ====

x <- factor(letters)
new <- factor("foo")
sb_before(x, new)
sb_after(x, new)


#############################################################################


# lists ====

x <- as.list(1:5)
new <- lapply(x, \(x)x*-1)
print(x)
sb2_before(x, new)
sb2_after(x, new)


#############################################################################


# recursive arrays / dimensional lists ====

x <- matrix(c(as.list(1:20), as.list(letters[1:20])) , ncol = 8) |> t()
dimnames(x) <- list(letters[1:8], letters[1:5])
print(x)
new <- matrix(c(as.list(-1:-20), as.list(letters[26:7])) , ncol = 8) |> t()
sb2_before(x, new, 1)
sb2_after(x, new, 1)
sb2_before(x, new, 2)
sb2_after(x, new, 2)



#############################################################################


# data.frame-like objects ====

x <- data.frame(a = 1:10, b = letters[1:10], c = 11:20, d = factor(letters[1:10]))
new <- data.frame(e = 101:110)
sb2_before(x, new, 2)
sb2_after(x, new, 2)
new <- x[1,]
sb2_before(x, new, 1)
sb2_after(x, new, 1)

}
\references{
Plate T, Heiberger R (2016). \emph{abind: Combine Multidimensional Arrays}. R package version 1.4-5, \url{https://CRAN.R-project.org/package=abind}.
}
