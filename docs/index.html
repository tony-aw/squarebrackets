<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Subset Methods as Alternatives to the Square Brackets Operators for Programming • squarebrackets</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Roboto_Serif-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Subset Methods as Alternatives to the Square Brackets Operators for Programming">
<meta name="description" content="Provides subset methods (supporting both atomic and recursive S3 classes) that may be more convenient alternatives to the `[` and `[&lt;-` operators, whilst maintaining similar performance. Some nice properties of these methods include, but are not limited to, the following. 1) The `[` and `[&lt;-` operators use different rule-sets for different data.frame-like types (data.frames, data.tables, tibbles, tidytables, etc.). The squarebrackets methods use the same rule-sets for the different data.frame-like types. 2) Performing dimensional subset operations on an array using `[` and `[&lt;-`, requires a-priori knowledge on the number of dimensions the array has. The squarebrackets methods work on any arbitrary dimensions without requiring such prior knowledge. 3) When selecting names with the `[` and `[&lt;-` operators, only the first occurrence of the names are selected in case of duplicate names. The squarebrackets methods always perform on all names in case of duplicates, not just the first. 4) The `[[` and `[[&lt;-` operators allow operating on a recursive subset of a nested list. But these only operate on a single recursive subset, and are not vectorized for multiple recursive subsets of a nested list at once. squarebrackets provides a way to reshape a nested list into a recursive matrix, thereby allowing vectorized operations on recursive subsets of such a nested list. 5) The `[&lt;-` operator only supports copy-on-modify semantics for most classes. The squarebrackets methods provides explicit pass-by-reference and pass-by-value semantics, whilst still respecting things like binding-locks and mutability rules. 6) squarebrackets supports index-less sub-set operations, which is more memory efficient (and better for the environment) for `long vectors` than sub-set operations using the `[` and `[&lt;-` operators.">
<meta property="og:description" content="Provides subset methods (supporting both atomic and recursive S3 classes) that may be more convenient alternatives to the `[` and `[&lt;-` operators, whilst maintaining similar performance. Some nice properties of these methods include, but are not limited to, the following. 1) The `[` and `[&lt;-` operators use different rule-sets for different data.frame-like types (data.frames, data.tables, tibbles, tidytables, etc.). The squarebrackets methods use the same rule-sets for the different data.frame-like types. 2) Performing dimensional subset operations on an array using `[` and `[&lt;-`, requires a-priori knowledge on the number of dimensions the array has. The squarebrackets methods work on any arbitrary dimensions without requiring such prior knowledge. 3) When selecting names with the `[` and `[&lt;-` operators, only the first occurrence of the names are selected in case of duplicate names. The squarebrackets methods always perform on all names in case of duplicates, not just the first. 4) The `[[` and `[[&lt;-` operators allow operating on a recursive subset of a nested list. But these only operate on a single recursive subset, and are not vectorized for multiple recursive subsets of a nested list at once. squarebrackets provides a way to reshape a nested list into a recursive matrix, thereby allowing vectorized operations on recursive subsets of such a nested list. 5) The `[&lt;-` operator only supports copy-on-modify semantics for most classes. The squarebrackets methods provides explicit pass-by-reference and pass-by-value semantics, whilst still respecting things like binding-locks and mutability rules. 6) squarebrackets supports index-less sub-set operations, which is more memory efficient (and better for the environment) for `long vectors` than sub-set operations using the `[` and `[&lt;-` operators.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">squarebrackets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/a_benchmarks_x.html">Benchmarks - sb_x</a></li>
    <li><a class="dropdown-item" href="articles/b_benchmarks_tf.html">Benchmarks - transform operations</a></li>
    <li><a class="dropdown-item" href="articles/c_benchmarks_lst.html">Benchmarks - Vectorized Recursive Subset Operations On Nested Lists</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tony-aw/squarebrackets/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="squarebrackets">squarebrackets<a class="anchor" aria-label="anchor" href="#squarebrackets"></a>
</h1></div>
<!-- badges: start -->

<p>squarebrackets: Subset Methods as Alternatives to the Square Brackets Operators for Programming</p>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>Provides subset methods (supporting both atomic and recursive S3 classes) that may be more convenient alternatives to the <code>[</code> and <code>[&lt;-</code> operators, whilst maintaining similar performance.</p>
<p>Some nice properties of these methods include, but are not limited to, the following:</p>
<ol style="list-style-type: decimal">
<li>The <code>[</code> and <code>[&lt;-</code> operators use different rule-sets for different data.frame-like types (data.frames, data.tables, tibbles, tidytables, etc.). The ‘squarebrackets’ methods use the same rule-sets for the different data.frame-like types.</li>
<li>Performing dimensional subset operations on an array using <code>[</code> and <code>[&lt;-</code>, requires a-priori knowledge on the number of dimensions the array has. The ‘squarebrackets’ methods work on any arbitrary dimensions without requiring such prior knowledge.</li>
<li>When selecting names with the <code>[</code> and <code>[&lt;-</code> operators, only the first occurrence of the names are selected in case of duplicate names. The ‘squarebrackets’ methods always perform on all names in case of duplicates, not just the first.</li>
<li>The <code>[[</code> and <code>[[&lt;-</code> operators allow operating on a recursive subset of a nested list. But these only operate on a single recursive subset, and are not vectorized for multiple recursive subsets of a nested list at once. ‘squarebrackets’ provides a way to reshape a nested list into a recursive matrix, thereby allowing vectorized operations on recursive subsets of such a nested list.</li>
<li>The <code>[&lt;-</code> operator only supports copy-on-modify semantics for most classes. The ‘squarebrackets’ methods provides explicit pass-by-reference and pass-by-value semantics, whilst still respecting things like binding-locks and mutability rules.</li>
<li>‘squarebrackets’ supports index-less sub-set operations, which is more memory efficient (and better for the environment) for <code>long vectors</code> than sub-set operations using the <code>[</code> and <code>[&lt;-</code> operators.</li>
</ol>
<p> </p>
</div>
<div class="section level2">
<h2 id="get-started">Get Started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h2>
<p>To get started see <code><a href="reference/aaa00_squarebrackets_help.html">?squarebrackets_help</a></code></p>
<p> </p>
</div>
<div class="section level2">
<h2 id="installing--loading">Installing &amp; Loading<a class="anchor" aria-label="anchor" href="#installing--loading"></a>
</h2>
<p>One can install ‘squarebrackets’ from GitHub like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"https://github.com/tony-aw/squarebrackets"</span><span class="op">)</span></span></code></pre></div>
<p>Special care has been taken to make sure the function names are clear, and that the function names are unlikely to conflict with core R, the recommended R packages, the rstudioapi package, or major packages from the fastverse. So one can attach the package - thus exposing its functions to the namespace - using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tony-aw/squarebrackets/" class="external-link">squarebrackets</a></span><span class="op">)</span></span></code></pre></div>
<p> </p>
</div>
<div class="section level2">
<h2 id="changelog-experimental-versions">Changelog (EXPERIMENTAL VERSIONS)<a class="anchor" aria-label="anchor" href="#changelog-experimental-versions"></a>
</h2>
<ul>
<li>10 March 2024: First GitHub upload - Package is very much experimental.</li>
<li>12 March 2024: Changed the introduction help page a bit, added <code><a href="reference/dt.html">dt_setadd()</a></code>, and added tests for all <code>dt_</code> - functions. There are slightly over 50,000 tests now.</li>
<li>15 March 2024: Added the <code><a href="reference/sb_setRename.html">sb_setRename()</a></code> method, and added tests for this method also.</li>
<li>16 March 2024: Fixed a bug in the “rcpp_set_rowcol” source code. Tweaked the documentation here and there a bit. Improved the tests a bit.</li>
<li>17 March 2024: Added more tests, and tweaked the documentation a bit.</li>
<li>19 March 2024: Some methods/functions did not support mutable_atomic type “complex”; this is now fixed. Added support for mutable_atomic type “raw”. Added tests for atomic type handling. Added the functions <code>ma_setv()</code>, and <code><a href="reference/class_mutable_atomic.html">couldb.mutable_atomic()</a></code>. Added the options “sb.rat” and “sb.chkdup”; argument <code>chkdup</code> is now also set to <code>FALSE</code> by default. Added more badges to the documentation.</li>
<li>20 March 2024: The user can now also specify <code>coe = TRUE</code> in <code>sb_mod.data.frame()</code>.</li>
<li>24 March 2024: Methods are now split between methods for non-recursive objects (<code>sb_</code>), and methods for recursive objects (<code>sb2_</code>).</li>
<li>26 March 2024: Replaced <code>seq_rec()</code> with <code>seq_rec2()</code>.</li>
<li>27 March 2024: Added <code><a href="reference/dt.html">dt_setreorder()</a></code>, and added tests for this also. ‘abind’ now as a dependency, and ‘abind’ based code removed, as it is redundant.</li>
<li>29 March 2024: Added <code>sb2_before.array()</code> and <code>sb2_after.array()</code>, and added tests for these also. Added tests for data.frame-like coercion types. Tweaked the documentation here and there a bit.</li>
<li>30 March 2024: Removed the separate <code>NA</code> checks, as they are redundant. Fixed some linguistic mistakes in the documentation.</li>
<li>1 April 2024: Removed <code>sb_coe()</code> but kept <code>sb2_coe()</code>. Added <code>inv</code> argument to <code><a href="reference/sb_mod.html">sb_mod()</a></code>/<code><a href="reference/sb_mod.html">sb2_mod()</a></code>, <code><a href="reference/sb_set.html">sb_set()</a></code>/<code><a href="reference/sb_set.html">sb2_set()</a></code>, and <code>sb2_coe()</code>, and added tests for these. Added <code>idx1()</code> for Copy-On-Modification Substitution, and added tests for <code>idx1()</code> also.Fixed a bug in character subset ordering in the <code>sb</code>/<code>sb2</code>_<code>mod</code>/<code>set</code>/<code>coe</code> - generic methods. Fixed a bug in the introduction message. Added even more tests. Added <code>idx1_dim()</code>, and added tests for these also.</li>
<li>5 April 2024: Replaced <code>idx1</code>/<code>idx0</code> with <code><a href="reference/idx1.html">idx()</a></code>.</li>
<li>18 May 2024: Added a few tests for the <code><a href="reference/idx1.html">idx()</a></code> method (need to add more). Fixed the export pattern expressions in the Namespace file. Adjusted the documentation.</li>
<li>26 May 2024: Removed <code>sb2_coe()</code>, as it is redundant.</li>
<li>6 June 2024: Removed the <code>sb(2)_before/after</code> methods in favour of the the new <code>bind_</code>/<code>bind2_</code> implementations. Added the <code>lst_</code> functions. Added the <code>options</code> help page.</li>
<li>30 June 2024: Re-written internal code for arrays. Added support for backward indexing via Complex Vector indices. Added more tests. Replaced <code>seq_names()</code> with the new and far more flexible <code><a href="reference/idx_r.html">idx_r()</a></code> function.</li>
<li>31 August 2024: Made the tests more efficient. Removed separate method dispatch for factors, as using the default atomic vector method dispatch is sufficient for factors.</li>
<li>7 September 2024: Incorporated some ALTREP functionality into the package.</li>
<li>15 September 2024: Replaced the <code>drop</code> argument with <code>red</code> to avoid confusion with base R’s own <code>drop</code> mechanic. Small performance improvements for <code><a href="reference/sub2ind.html">sub2ind()</a></code> and <code><a href="reference/sb_set.html">sb_set.array()</a></code>.</li>
<li>26 September 2024: Overhauled how indexing with complex vectors work.</li>
<li>28 September 2024: Split <code>sb(2)_setRename()</code> into <code><a href="reference/sb_setRename.html">sb_setFlatnames()</a></code>, <code><a href="reference/sb_setRename.html">sb_setDimnames()</a></code>, and <code><a href="reference/sb_setRename.html">sb2_setVarnames()</a></code>.</li>
<li>10 October 2024: <code><a href="reference/sb_mod.html">sb_mod()</a></code> now makes partial copies of data.frame-like objects instead of whole copies, for more memory efficiency. Also removed the old <code>sb_str()</code> and <code>sb_a()</code> functions. Renamed <code>ci_seq()</code> to <code><a href="reference/cp_seq.html">cp_seq()</a></code> (in preparation for the next update).</li>
<li>19 October 2024: Removed the renaming methods (<code>sb_setRename</code>), and <code>seq_rec2()</code>. Added <code>slcseq_</code>.</li>
<li>5 November 2024: Renamed <code>slcseq_</code> to <code>slice_</code>. Re-organized the documentation a bit. Fixed examples of the <code>ci</code> and <code>tci</code> help pages. Added <code><a href="reference/bind.html">bind_mat()</a></code> and <code>bind2_mat()</code>. Added <code>ndims()</code>.</li>
<li>14 November 2024: Performance improvement of <code><a href="reference/match_all.html">match_all()</a></code>.</li>
<li>21 November 2024: Improved the documentation. Slightly tweaked array argument usage. Added <code>sticky</code> option. Brought back the renaming methods. Changed behaviour of the <code>use.names</code> argument in <code><a href="reference/lst.html">lst_untree()</a></code>.</li>
<li>24 November 2024: Matrices now use the same API as arrays. Adjusted the documentation accordingly. Cleaned up the internal code a bit.</li>
<li>30 November 2024: The binding implementations can now bind mixtures of atomic and recursive objects.</li>
<li>5 December 2024: Replaced the <code>_rm</code> post-fixes with <code>_wo</code> in all methods, to avoid confusion. Coercion for data.frame-like objects now happens automatically, and only when needed, in the <code><a href="reference/sb_mod.html">sb2_mod()</a></code> method, and updated the documentation accordingly. Slightly re-organized the documentation.</li>
<li>14 December 2024: Removed the <code>ma_setv()</code> function in favour of the new <code>slicev_</code> set of methods. Renamed the <code>sub,dims</code> argument pair to <code>s,d</code>. Changed the documentation accordingly.</li>
<li>27 December 2024: Overhauled the arguments for the data.frame/data.table methods and functions. Now the <code>s,d</code> argument pair is the primary argument set for all dimensional objects.</li>
<li>11 March 2025: Overhauled the internal code for arrays; it’s even faster now. Re-organised some other code in preparation for the next update. Renamed <code>ndims()</code> to <code><a href="reference/ndim.html">ndim()</a></code>.</li>
</ul>
<p> </p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/tony-aw/squarebrackets/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/tony-aw/squarebrackets/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.mozilla.org/en-US/MPL/2.0/" class="external-link">MPL-2.0</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing squarebrackets</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Tony Wilkes <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0001-9498-8379" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#wip" class="external-link"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP - Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg"></a></li>
<li><a href="https://orcid.org/0000-0001-9498-8379" class="external-link"><img src="https://img.shields.io/badge/ORCID-0000--0001--9498--8379-green.svg"></a></li>
</ul>
</div>

<div class="table-of-contents">
<h2 data-toc-skip>Table of contents</h2>
<ul class="list-unstyled">
<li><nav id="toc"></nav></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tony Wilkes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
